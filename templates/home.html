<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Traffic Accident Severity Prediction</title>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- FontAwesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<!-- Canvas Confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

<style>
body {
    background: linear-gradient(135deg, #cce7ff, #ffffff);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding: 50px 0;
}
.container {
    max-width: 700px;
    background-color: #fff;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 12px 25px rgba(0,0,0,0.15);
}
h1 {
    text-align: center;
    margin-bottom: 20px;
    font-weight: 800;
    color: #00796b;
}
.abstract {
    text-align: justify;
    margin-bottom: 30px;
    font-size: 1rem;
    color: #555;
}
.btn-primary { 
    background-color: #00796b; 
    border: none; 
    font-weight: bold; 
    transition: 0.3s; 
}
.btn-primary:hover { 
    background-color: #004d40; 
    transform: scale(1.05); 
}
.card-input { 
    transition: transform 0.3s ease, box-shadow 0.3s ease; 
    border-radius:15px; 
}
.card-input:hover { 
    transform: translateY(-8px); 
    box-shadow:0 12px 25px rgba(0,0,0,0.25); 
}
.weather-icon, .traffic-icon { 
    font-size: 2rem; 
    animation: float 3s ease-in-out infinite alternate; 
    margin-right: 10px; 
}
@keyframes float { 
    0%{transform:translateY(0);}50%{transform:translateY(-8px);}100%{transform:translateY(0);} 
}
.result { 
    margin-top:25px; 
    padding:25px; 
    border-radius:15px; 
    font-weight:bold; 
    text-align:center; 
    color:#fff; 
    font-size:1.4rem; 
    animation:fadeIn 1s ease-in-out; 
}
.low { background-color: #4caf50; }
.medium { background-color: #ff9800; }
.high { background-color: #f44336; }
@keyframes fadeIn { 
    from { opacity: 0; transform: translateY(-10px);} 
    to { opacity: 1; transform: translateY(0);} 
}
</style>
</head>
<body>
<div class="container">
<h1>Traffic Accident Severity Prediction</h1>
<p class="abstract">
Predict accident severity in NYC using weather, road, time, traffic, and accident type.
</p>

<form action="{{ url_for('predict_accident') }}" method="post">
<div class="row g-3">
    <div class="col-md-6">
        <div class="card card-input p-3">
            <label class="form-label"><i class="fas fa-cloud-sun weather-icon"></i> Weather Conditions</label>
            <select class="form-control" name="weather" required>
                <option selected disabled value="">Select Weather</option>
                <option value="clear">Clear</option>
                <option value="rain">Rain</option>
                <option value="snow">Snow</option>
                <option value="fog">Fog</option>
            </select>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card card-input p-3">
            <label class="form-label"><i class="fas fa-road traffic-icon"></i> Road Conditions</label>
            <select class="form-control" name="road_condition" required>
                <option selected disabled value="">Select Road</option>
                <option value="dry">Dry</option>
                <option value="wet">Wet</option>
                <option value="construction">Construction</option>
                <option value="icy">Icy</option>
            </select>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card card-input p-3">
            <label class="form-label"><i class="fas fa-clock"></i> Time of Day</label>
            <select class="form-control" name="time_of_day" required>
                <option selected disabled value="">Select Time</option>
                <option value="morning_rush">Morning Rush</option>
                <option value="daytime">Daytime</option>
                <option value="evening_rush">Evening Rush</option>
                <option value="night">Night</option>
            </select>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card card-input p-3">
            <label class="form-label"><i class="fas fa-car-side traffic-icon"></i> Traffic Conditions</label>
            <select class="form-control" name="traffic" required>
                <option selected disabled value="">Select Traffic</option>
                <option value="light">Light</option>
                <option value="moderate">Moderate</option>
                <option value="heavy">Heavy</option>
            </select>
        </div>
    </div>
    <div class="col-12">
        <div class="card card-input p-3">
            <label class="form-label"><i class="fas fa-car-crash"></i> Accident Type</label>
            <select class="form-control" name="accident_type" required>
                <option selected disabled value="">Select Type</option>
                <option value="rear_end">Rear-end</option>
                <option value="head_on">Head-on</option>
                <option value="side_collision">Side Collision</option>
                <option value="rollover">Rollover</option>
                <option value="others">Others</option>
            </select>
        </div>
    </div>
    <div class="col-12">
        <input class="btn btn-primary mt-3" type="submit" value="Predict Severity">
    </div>
</div>
</form>

{% if results %}
<div class="result {% if results=='Low' %}low{% elif results=='Medium' %}medium{% else %}high{% endif %}">
    <i class="fas fa-exclamation-triangle"></i> Predicted Severity: {{ results }}
</div>

<!-- Confetti for High Severity -->
{% if results=='High' %}
<script>
confetti({particleCount:200, spread:70, origin:{y:0.6}});
</script>
{% endif %}

{% endif %}
</div>
</body>
</html>
